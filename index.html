<!DOCTYPE html>
<html lang="en">
<head>
    <!-- META TAGS AND TITLE -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malte Stoepke's Portfolio OS</title>
    
    <!-- EXTERNAL STYLESHEETS -->
    <!-- 98.css for Windows 98 style UI -->
    <link rel="stylesheet" href="https://unpkg.com/98.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Clippy.js stylesheet for the assistant -->
    <link rel="stylesheet" type="text/css" href="https://gitcdn.xyz/repo/pi0/clippyjs/master/assets/clippy.css">
    
    <!-- INLINE CUSTOM STYLES -->
    <style>
        /* GLOBAL STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "MS Sans Serif", "Tahoma", Arial, sans-serif;
        }
        
        /* BODY BACKGROUND AND LAYOUT */
        body {
            background: #008080 url('https://static.wikitide.net/windowswallpaperwiki/2/24/Clouds_%28Windows_95%29.png') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        /* DESKTOP AREA */
        .desktop {
            flex-grow: 1;
            padding: 10px;
            position: relative;
            z-index: 1;
        }
        
        /* DESKTOP ICON STYLES */
        .icon {
            position: absolute;
            text-align: center;
            cursor: pointer;
            padding: 8px;
            width: 90px;
            border: 1px solid transparent;
            user-select: none;
            display: block !important;
            visibility: visible !important;
        }
       
        .icon.draggable:hover {
            background: rgba(0, 0, 128, 0.5);
            border: 1px dotted white;
        }
        .icon img {
            width: 32px;
            height: 32px;
            object-fit: contain;
        }
        .icon p {
            color: white;
            text-shadow: 1px 1px black;
            font-size: 11px;
            padding: 2px;
            word-wrap: break-word;
            background: #008080;
        }
       
        .icon.selected p {
            background-color: #000080;
        }
        .icon[data-id="maya"] {
            z-index: 2 !important;
        }
        
        /* WINDOW STYLES */
        .window {
            display: none;
            position: absolute;
            top: 10%;
            left: 10%;
            width: 600px;
            min-width: 250px;
            min-height: 150px;
            max-height: 80%;
            overflow: hidden;
            cursor: default;
            z-index: 10;
            resize: both;
            border: 2px solid #c0c0c0;
            box-shadow: 2px 2px 0px #000000, -2px -2px 0px #ffffff;
            background: #c0c0c0;
        }
        .window.maximized {
            width: 100% !important;
            height: calc(100vh - 30px) !important;
            top: 0 !important;
            left: 0 !important;
            max-height: none;
            resize: none;
        }
        .window.active {
            display: block;
        }
       
        /* TITLE BAR STYLES */
        .title-bar {
            position: relative;
            height: 22px;
            padding: 2px 4px;
            cursor: move;
            background: linear-gradient(to right, #000080, #1084d0);
            color: white;
            font-size: 12px;
            line-height: 18px;
        }
        .title-bar-text {
            display: inline-block;
            padding-left: 4px;
        }
        .title-bar-controls {
            position: absolute;
            right: 4px;
            top: 3px;
            display: flex;
            gap: 2px;
        }
        .title-bar-controls button {
            width: 16px;
            height: 16px;
            padding: 0;
            margin: 0;
            background: #c0c0c0;
            border: 1px solid #000;
            border-top-color: #fff;
            border-left-color: #fff;
            cursor: pointer;
        }
        
        /* WINDOW BODY STYLES */
        .window-body {
            margin-top: 22px;
            padding: 8px;
            background: #dfdfdf;
            height: calc(100% - 22px);
            overflow: auto;
            font-size: 12px;
        }
        .window-body img.artwork-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 8px auto;
            border: 2px inset #ffffff;
        }
        .artwork-gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .artwork-gallery img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border: 2px outset #ffffff;
            cursor: pointer;
        }
        
        /* TASKBAR STYLES */
        .taskbar {
            height: 30px;
            background: #c0c0c0;
            border-top: 2px solid #ffffff;
            display: flex;
            align-items: center;
            padding: 0 2px;
            position: relative;
            z-index: 100;
            flex-shrink: 0;
        }
        .start-button {
            font-weight: bold;
            padding: 2px 6px;
            height: 26px;
            display: flex;
            align-items: center;
            background: #c0c0c0;
            border: 2px outset #ffffff;
        }
        .start-button img {
            width: 20px;
            height: 20px;
            margin-right: 4px;
        }
       
        .taskbar-time {
            font-size: 11px;
            padding: 2px 4px;
            border: 1px solid #808080;
            border-right: 2px solid #fff;
            border-bottom: 2px solid #fff;
            min-width: 80px;
            text-align: center;
            margin-left: 4px;
        }
       
        .taskbar-user {
            font-size: 11px;
            padding: 2px 6px;
            border: 1px solid #808080;
            margin: 0 2px;
        }
        .taskbar-apps {
            display: flex;
            flex-grow: 1;
            margin: 0 4px;
            gap: 2px;
            overflow: hidden;
        }
        .taskbar-app {
            padding: 2px 6px;
            font-size: 12px;
            cursor: pointer;
            max-width: 150px;
            min-width: 80px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex-shrink: 1;
            background: #c0c0c0;
            border: 2px outset #ffffff;
        }
       
        .taskbar-app.active {
            border: 2px inset #c0c0c0;
        }
       
        /* START MENU STYLES */
        .start-menu {
            display: none;
            position: absolute;
            bottom: 30px;
            left: 0;
            width: 200px;
            background: #c0c0c0;
            border-top: 2px solid #ffffff;
            border-left: 2px solid #ffffff;
            border-right: 2px solid #000;
            border-bottom: 2px solid #000;
            z-index: 1000;
        }
        .start-menu.active {
            display: block;
        }
        .start-menu ul {
            list-style: none;
            padding: 2px;
            margin: 0;
        }
        .start-menu li {
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
        }
        .start-menu li img {
            width: 22px;
            height: 22px;
            margin-right: 8px;
        }
        .start-menu li:hover {
            background: #000080;
            color: white;
        }
       
        .start-menu-separator {
            height: 1px;
            background: #808080;
            border-bottom: 1px solid #fff;
            margin: 4px 0;
        }
        
        /* LOGIN BOX STYLES */
        .login-box {
            background: #c0c0c0;
            padding: 20px;
            width: 320px;
            text-align: center;
            border: 2px outset #ffffff;
        }
       
        .login-title {
            background: #000080;
            color: white;
            padding: 4px;
            margin: -20px -20px 20px -20px;
            font-weight: bold;
            font-size: 12px;
        }
       
        .login-field {
            margin: 12px 0;
            text-align: left;
        }
       
        .login-field label {
            display: block;
            margin-bottom: 4px;
            font-size: 12px;
        }
        .login-field input, .login-field textarea {
            width: 100%;
            padding: 4px;
        }
       
        .login-buttons {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        
        /* MINESWEEPER (PIXELSWEEPER) STYLES */
        .minesweeper-board {
            display: grid;
            gap: 1px;
            background: #808080;
            padding: 8px;
            border: 2px inset #fff;
            margin: 0 auto;
        }
        .minesweeper-cell {
            width: 20px;
            height: 20px;
            background: #c0c0c0;
            border: 2px outset #fff;
            text-align: center;
            line-height: 16px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
        }
       
        .minesweeper-cell.revealed {
            border: 1px solid #808080;
        }
       
        .minesweeper-cell.mine {
            background-color: red;
        }
       
        .color-1 { color: blue; }
        .color-2 { color: green; }
        .color-3 { color: red; }
        .color-4 { color: navy; }
        .color-5 { color: maroon; }
        .color-6 { color: teal; }
        .color-7 { color: black; }
        .color-8 { color: gray; }
        
        /* CONTEXT MENU STYLES */
        .context-menu {
            position: absolute;
            background: #c0c0c0;
            border-top: 2px solid #ffffff;
            border-left: 2px solid #ffffff;
            border-right: 2px solid #000;
            border-bottom: 2px solid #000;
            z-index: 10000;
            font-size: 12px;
            padding: 2px;
            display: none;
        }
        .context-menu ul {
            list-style: none;
        }
        .context-menu li {
            padding: 4px 18px;
            cursor: pointer;
        }
        .context-menu li:hover {
            background: #000080;
            color: white;
        }
        
        /* ARTWORK GALLERY STYLES */
        .artwork-gallery img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border: 2px outset #ffffff;
            cursor: pointer;
        }
       
        /* PAINT APPLICATION STYLES */
        .paint-canvas {
            border: 1px solid black;
            background: white;
            cursor: crosshair;
            display: block;
            margin: 0 auto;
        }
        .paint-tools {
            display: flex;
            gap: 4px;
            margin-bottom: 8px;
        }
        .tool-button {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #c0c0c0;
            border: 2px outset #ffffff;
            cursor: pointer;
        }
        .tool-button.active {
            border: 2px inset #c0c0c0;
        }
        .color-picker {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }
        .color-option {
            width: 24px;
            height: 24px;
            border: 2px outset #ffffff;
            cursor: pointer;
        }
        .color-option.selected {
            border: 2px inset #c0c0c0;
        }
        
        /* BLOG-SPECIFIC STYLES */
        .blog-window .window-body {
            padding: 0;
            height: calc(100% - 66px); /* Adjust for toolbar and status bar */
            background: #ffffff;
        }
        .blog-toolbar {
            background: #c0c0c0;
            border-bottom: 2px inset #ffffff;
            padding: 4px;
            display: flex;
            gap: 4px;
        }
        .blog-toolbar button {
            background: #c0c0c0;
            border: 2px outset #ffffff;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
        }
        .blog-toolbar button:hover {
            background: #e0e0e0;
        }
        .blog-status-bar {
            background: #c0c0c0;
            border-top: 2px inset #ffffff;
            padding: 2px 4px;
            font-size: 11px;
            color: #000080;
            position: absolute;
            bottom: 0;
            width: 100%;
        }
        .blog-post {
            margin: 10px;
            padding: 10px;
            background: #ffffff;
            border: 2px outset #c0c0c0;
            transition: transform 0.2s ease;
            cursor: pointer;
        }
        .blog-post:hover {
            transform: scale(1.02);
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3);
        }
        .blog-post img {
            max-width: 100%;
            height: auto;
            border: 2px inset #ffffff;
            margin: 10px 0;
            animation: pulse 2s infinite;
        }
        .blog-post h3 {
            font-size: 14px;
            color: #000080;
            margin-bottom: 5px;
            text-decoration: underline;
            transition: color 0.3s;
            animation: text-blink 1s infinite;
        }
        .blog-post h3:hover {
            color: #ff00ff;
        }
        .blog-post .date {
            font-size: 10px;
            color: #808080;
            margin-bottom: 10px;
            font-style: italic;
            animation: fade-in 1.5s ease-in-out infinite;
        }
        .blog-post p {
            font-size: 12px;
            line-height: 1.5;
            animation: text-slide 10s linear infinite;
        }
        .blog-controls {
            display: flex;
            gap: 10px;
            margin: 10px;
        }
        .blog-controls button {
            background: #c0c0c0;
            border: 2px outset #ffffff;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
        }
        .blog-controls button:hover {
            background: #e0e0e0;
        }
        .blog-form {
            display: none;
            margin: 10px;
            padding: 10px;
            background: #ffffff;
            border: 2px inset #c0c0c0;
        }
        .blog-form.active {
            display: block;
        }
        .blog-form input,
        .blog-form textarea {
            width: 100%;
            margin-bottom: 10px;
            padding: 4px;
            font-size: 12px;
            border: 2px inset #c0c0c0;
        }
        .blog-form textarea {
            height: 100px;
            resize: vertical;
        }
        
        /* ANIMATIONS FOR BLOG */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes text-blink {
            0%, 50% { color: #000080; }
            51%, 100% { color: #ff0000; }
        }
        @keyframes fade-in {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        @keyframes text-slide {
            0% { transform: translateX(0); }
            50% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }
        
        /* MEDIA QUERIES FOR RESPONSIVENESS */
        @media (max-width: 768px) {
            .window {
                width: 95%;
                left: 2.5%;
            }
           
            .icon {
                width: 70px;
            }
           
            .icon img {
                width: 24px;
                height: 24px;
            }
        }
        @media screen and (max-width: 600px), screen and (orientation: portrait) {
            .window {
                width: 100% !important;
                height: calc(100vh - 40px) !important;
                top: 0 !important;
                left: 0 !important;
                position: fixed;
                resize: none;
            }
            .desktop {
                display: flex;
                flex-wrap: wrap;
                justify-content: flex-start;
                align-content: flex-start;
            }
            .icon {
                position: relative;
                margin: 10px;
                width: 80px;
            }
            .taskbar {
                height: 40px;
            }
            .start-button {
                height: 36px;
            }
            .start-menu {
                width: 100%;
                bottom: 40px;
                left: 0;
            }
            .taskbar-time {
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- AUDIO ELEMENTS FOR SOUNDS -->
    <audio id="startup-sound" src="https://orangefreesounds.com/wp-content/uploads/2022/05/Windows-95-startup-sound.mp3" preload="auto"></audio>
    <audio id="error-sound" src="https://orangefreesounds.com/wp-content/uploads/2020/09/Windows-95-error-sound.mp3" preload="auto"></audio>
    <audio id="window-open-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
    <audio id="window-close-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-quick-jump-arcade-game-239.mp3"></audio>
    <audio id="click-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-mouse-click-close-1113.mp3"></audio>
   
    <!-- LOADING SCREEN -->
    <div id="loading-screen">
        <img src="https://win98icons.alexmeub.com/icons/png/windows-0.png" alt="Windows 95" width="48" height="48">
        <h2>Portfolio OS</h2>
        <p>Starting...</p>
        <p>Made by Malte Stoepke</p>
        <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
        </div>
    </div>
    
    <!-- LOGIN SCREEN -->
    <div id="login-screen" style="display: none;">
        <div class="login-box">
            <div class="login-title">Portfolio OS Login</div>
            <img src="https://win98icons.alexmeub.com/icons/png/keys-4.png" alt="Keys" width="48" height="48" style="margin-bottom: 10px;">
            <div class="login-field">
                <label for="username"><u>U</u>ser name:</label>
                <input type="text" id="username" value="Malte Stoepke">
            </div>
            <div class="login-field">
                <label for="password"><u>P</u>assword:</label>
                <input type="password" id="password" value="Maus_123">
            </div>
            <div class="login-buttons field-row" style="justify-content: center;">
                <button onclick="login()"><img src="https://win98icons.alexmeub.com/icons/png/key-2.png" style="width:16px; height:16px; margin-right: 5px;">Log On</button>
                <button onclick="guestLogin()">Guest</button>
            </div>
        </div>
    </div>
   
    <!-- DESKTOP AREA WITH ICONS -->
    <div class="desktop" id="desktop" style="display: none;">
        <!-- CORE ICONS -->
        <div class="icon" data-id="my-computer" style="left: 20px; top: 20px;" ondblclick="openWindow('my-computer-window')">
            <img src="https://win98icons.alexmeub.com/icons/png/computer-4.png" alt="My Computer">
            <p>My Computer</p>
        </div>
        <div class="icon" data-id="portfolio" style="left: 20px; top: 100px;" ondblclick="openWindow('portfolio-window')">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Portfolio">
            <p>My 3D Art</p>
        </div>
        <div class="icon" data-id="about" style="left: 20px; top: 180px;" ondblclick="openWindow('about-window')">
            <img src="https://win98icons.alexmeub.com/icons/png/notepad_file-1.png" alt="About">
            <p>About Me.txt</p>
        </div>
        <div class="icon" data-id="paint" style="left: 20px; top: 260px;" ondblclick="openPaint()">
            <img src="https://win98icons.alexmeub.com/icons/png/paint-0.png" alt="Paint">
            <p>Paint</p>
        </div>
        <div class="icon" data-id="pixelsweeper" style="left: 20px; top: 340px;" ondblclick="openWindow('pixelsweeper-window')">
            <img src="https://win98icons.alexmeub.com/icons/png/minesweeper-2.png" alt="PixelSweeper">
            <p>PixelSweeper</p>
        </div>
        <div class="icon" data-id="recycle" style="left: 20px; top: 420px;" ondblclick="openWindow('recycle-window')">
            <img src="https://win98icons.alexmeub.com/icons/png/recycle_full-2.png" alt="Recycle Bin">
            <p>Recycle Bin</p>
        </div>
        
        <!-- PROJECT FOLDER ICONS -->
        <!-- Add or remove project folders here by copying the structure -->
        <div class="icon" data-id="friedrich" style="left: 120px; top: 20px;" ondblclick="openFriedrich()">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Friedrich">
            <p>Friedrich</p>
        </div>
        <div class="icon" data-id="the-nyrrik" style="left: 120px; top: 260px;" ondblclick="openTheNyrrik()">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="The Nyrrik">
            <p>The Nyrrik</p>
        </div>
        <div class="icon" data-id="wanderlust-the-roadtrip" style="left: 120px; top: 340px;" ondblclick="openWanderlustTheRoadtrip()">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Wanderlust: The Roadtrip">
            <p>Wanderlust: The Roadtrip</p>
        </div>
        <div class="icon" data-id="maxs-game" style="left: 120px; top: 420px;" ondblclick="openMaxsGame()">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Max's Game">
            <p>Max's Game</p>
        </div>
        <div class="icon" data-id="undo" style="left: 120px; top: 500px;" ondblclick="openUndo()">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Undo">
            <p>Undo</p>
        </div>
        <div class="icon" data-id="berlin-girl-melody" style="left: 120px; top: 580px;" ondblclick="openBerlinGirlMelody()">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Berlin-Girl: Melody">
            <p>Berlin-Girl: Melody</p>
        </div>
        
        <!-- OTHER ICONS -->
        <div class="icon" data-id="maya" style="left: 120px; top: 100px;" ondblclick="openMaya()">
            <img src="https://win98icons.alexmeub.com/icons/png/directx-0.png" alt="Maya 1.0">
            <p>Maya 1.0</p>
        </div>
        <div class="icon" data-id="blog" style="left: 120px; top: 180px;" ondblclick="openWindow('blog-window')">
            <img src="https://win98icons.alexmeub.com/icons/png/internet_explorer-4.png" alt="Blog">
            <p>My Blog</p>
        </div>
    </div>
   
    <!-- WINDOW DEFINITIONS -->
    <!-- Each div here is a window that opens on double-click. Add/remove windows as needed. -->
    <div class="window" id="my-computer-window" style="width: 400px; height: 300px;">
        <div class="title-bar">
            <div class="title-bar-text">My Computer</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize" onclick="minimizeWindow('my-computer-window')"></button>
                <button aria-label="Maximize" onclick="maximizeWindow('my-computer-window')"></button>
                <button aria-label="Close" onclick="closeWindow('my-computer-window')"></button>
            </div>
        </div>
        <div class="window-body">
            <!-- Icons inside My Computer window -->
            <div class="icon" ondblclick="openWindow('portfolio-window')">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Portfolio">
                <p>My 3D Art</p>
            </div>
            <!-- Project folders inside My Computer -->
            <div class="icon" ondblclick="openFriedrich()">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Friedrich">
                <p>Friedrich</p>
            </div>
            <div class="icon" ondblclick="openTheNyrrik()">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="The Nyrrik">
                <p>The Nyrrik</p>
            </div>
            <div class="icon" ondblclick="openWanderlustTheRoadtrip()">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Wanderlust: The Roadtrip">
                <p>Wanderlust: The Roadtrip</p>
            </div>
            <div class="icon" ondblclick="openMaxsGame()">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Max's Game">
                <p>Max's Game</p>
            </div>
            <div class="icon" ondblclick="openUndo()">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Undo">
                <p>Undo</p>
            </div>
            <div class="icon" ondblclick="openBerlinGirlMelody()">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Berlin-Girl: Melody">
                <p>Berlin-Girl: Melody</p>
            </div>
            <div class="icon" ondblclick="openWindow('blog-window')">
                <img src="https://win98icons.alexmeub.com/icons/png/internet_explorer-4.png" alt="Blog">
                <p>My Blog</p>
            </div>
        </div>
    </div>
   
    <div class="window" id="portfolio-window" style="width: 500px; height: 400px;">
        <div class="title-bar">
            <div class="title-bar-text">My 3D Art</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize" onclick="minimizeWindow('portfolio-window')"></button>
                <button aria-label="Maximize" onclick="maximizeWindow('portfolio-window')"></button>
                <button aria-label="Close" onclick="closeWindow('portfolio-window')"></button>
            </div>
        </div>
        <div class="window-body" id="portfolio-content">
            <h2>My 3D Artworks</h2>
            <p>Explore my projects in the individual folders.</p>
        </div>
    </div>
   
    <div class="window" id="about-window" style="width: 400px; height: 250px;">
        <div class="title-bar">
            <div class="title-bar-text">About Me.txt - Notepad</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize" onclick="minimizeWindow('about-window')"></button>
                <button aria-label="Maximize" onclick="maximizeWindow('about-window')"></button>
                <button aria-label="Close" onclick="closeWindow('about-window')"></button>
            </div>
        </div>
        <div class="window-body" style="background: white; font-family: 'Lucida Console', monospace;">
            <!-- Editable about content -->
            <p class="editable-field" contenteditable="false" id="about-bio"><strong>Malte Stoepke - 3D Artist</strong></p>
            <br>
            <p class="editable-field" contenteditable="false" id="about-desc">Hello. I'm Malte, a 3D artist who’s absolutely crazy about creating characters and creatures! I pour my heart into developing a character’s story, sketching ideas, and sculpting them in 3D with insane detail. I love taking a concept and making it game-ready through retopology, and I can even import and animate in Unreal Engine 5 (check out my work: [Friedrich]). I spend hours perfecting every little thing because I’m just that passionate about what I do!
I’m in my third year of a four-year Bachelor’s program in Creative Media and Game Technologies (CMGT) at Hanze University of Applied Sciences in Groningen, Netherlands. Right now, I’m studying abroad at Kansai Gaidai University in Japan for the first semester, diving into their Asian Studies program. After this, I’m on the hunt for an internship in the gaming industry or animation industry.
I’ve got some programming experience in C# with Unity, plus HTML and JavaScript (yep, I built this website myself!). Some might think my skills are too spread out, but let me tell you, understanding game programming makes collaborating with developers so much smoother, which is super important for awesome projects.
On top of that, I’m really experienced with Scrum/Agile processes and can rock roles like product owner or project manager. Last semester in my second year, I led a student project for Bosch as both project manager and lead artist. We totally nailed it, and our client was thrilled with the result (check it out: [Wanderlust: The Roadtrip]).
I’m really, really, really passionate about my work, and I hope you’ll take a moment to explore my portfolio website!</p>
            <br>
            <p class="editable-field" contenteditable="false" id="about-contact"> If you’re pressed for time, definitely swing by my ArtStation to see my creations!</p>
            <div class="edit-controls">
                <button onclick="saveAboutEdits()">Save Changes</button>
            </div>
        </div>
    </div>
   
    <div class="window" id="pixelsweeper-window" style="width: auto; height: auto;">
        <div class="title-bar">
            <div class="title-bar-text">PixelSweeper</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize" onclick="minimizeWindow('pixelsweeper-window')"></button>
                <button aria-label="Close" onclick="closeWindow('pixelsweeper-window')"></button>
            </div>
        </div>
        <div class="window-body">
            <div class="minesweeper-controls">
                <button onclick="startMinesweeper(8, 8, 10)">Beginner</button>
                <button onclick="startMinesweeper(16, 16, 40)">Intermediate</button>
                <button onclick="startMinesweeper(30, 16, 99)">Expert</button>
            </div>
            <div id="minesweeper-board" class="minesweeper-board"></div>
        </div>
    </div>
    <div class="window" id="maya-window" style="width: 600px; height: 400px;">
        <div class="title-bar">
            <div class="title-bar-text">Maya 1.0</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize" onclick="minimizeWindow('maya-window')"></button>
                <button aria-label="Maximize" onclick="maximizeWindow('maya-window')"></button>
                <button aria-label="Close" onclick="closeWindow('maya-window')"></button>
            </div>
        </div>
        <div class="window-body">
            <canvas id="maya-canvas" width="580" height="340"></canvas>
        </div>
    </div>
    <div class="window" id="recycle-window" style="width: 400px; height: 300px;">
        <div class="title-bar">
            <div class="title-bar-text">Recycle Bin</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize" onclick="minimizeWindow('recycle-window')"></button>
                <button aria-label="Maximize" onclick="maximizeWindow('recycle-window')"></button>
                <button aria-label="Close" onclick="closeWindow('recycle-window')"></button>
            </div>
        </div>
        <div class="window-body">
            <p>Unfinished work:</p>
            <ul>
                <li>Project 1: Incomplete 3D model</li>
                <li>Project 2: Draft blog post</li>
            </ul>
        </div>
    </div>
    <div class="window blog-window" id="blog-window" style="width: 600px; height: 400px;">
        <div class="title-bar">
            <div class="title-bar-text">My Blog - Internet Explorer</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize" onclick="minimizeWindow('blog-window')"></button>
                <button aria-label="Maximize" onclick="maximizeWindow('blog-window')"></button>
                <button aria-label="Close" onclick="closeWindow('blog-window')"></button>
            </div>
        </div>
        <div class="blog-toolbar">
            <button onclick="goBack()"><i class="fas fa-arrow-left"></i> Back</button>
            <button onclick="goForward()"><i class="fas fa-arrow-right"></i> Forward</button>
            <button onclick="refreshBlog()"><i class="fas fa-sync"></i> Refresh</button>
            <button onclick="openWindow('my-computer-window')"><i class="fas fa-home"></i> Home</button>
        </div>
        <div class="window-body">
            <div class="blog-controls" id="blog-controls" style="display: none;">
                <button onclick="toggleBlogForm()">Add New Post</button>
            </div>
            <div class="blog-form" id="blog-form">
                <input type="text" id="blog-title" placeholder="Post Title">
                <input type="text" id="blog-image" placeholder="Image URL">
                <textarea id="blog-content" placeholder="Post Content"></textarea>
                <button onclick="saveBlogPost()">Save Post</button>
            </div>
            <div id="blog-posts"></div>
        </div>
        <div class="blog-status-bar">Ready</div>
    </div>
   
    <!-- CONTEXT MENU -->
    <div class="context-menu" id="context-menu">
        <ul>
            <li id="context-delete">Delete</li>
        </ul>
    </div>
   
    <!-- TASKBAR -->
    <div class="taskbar" style="display: none;">
        <button class="start-button" id="start-button">
            <img src="https://win98icons.alexmeub.com/icons/png/windows-0.png" alt="Start">
            <span>Start</span>
        </button>
        <div class="taskbar-apps" id="taskbar-apps"></div>
        <div class="taskbar-user" id="taskbar-user">Guest</div>
        <div class="taskbar-time" id="taskbar-time"></div>
    </div>
   
    <!-- START MENU -->
    <div class="start-menu" id="start-menu">
        <ul>
            <!-- Menu items for projects and apps - add/remove li elements here -->
            <li onclick="openWindow('portfolio-window')"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png">Portfolio</li>
            <li onclick="openFriedrich()"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png">Friedrich</li>
            <li onclick="openTheNyrrik()"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png">The Nyrrik</li>
            <li onclick="openWanderlustTheRoadtrip()"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png">Wanderlust: The Roadtrip</li>
            <li onclick="openMaxsGame()"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png">Max's Game</li>
            <li onclick="openUndo()"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png">Undo</li>
            <li onclick="openBerlinGirlMelody()"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png">Berlin-Girl: Melody</li>
            <li onclick="openWindow('about-window')"><img src="https://win98icons.alexmeub.com/icons/png/notepad_file-1.png">About Me</li>
            <li onclick="openWindow('blog-window')"><img src="https://win98icons.alexmeub.com/icons/png/internet_explorer-4.png">My Blog</li>
            <li class="start-menu-separator"></li>
            <li onclick="openPaint()"><img src="https://win98icons.alexmeub.com/icons/png/paint-0.png">Paint</li>
            <li onclick="openWindow('pixelsweeper-window')"><img src="https://win98icons.alexmeub.com/icons/png/minesweeper-2.png">PixelSweeper</li>
            <li onclick="openMaya()"><img src="https://win98icons.alexmeub.com/icons/png/directx-0.png">Maya 1.0</li>
            <li class="start-menu-separator"></li>
            <li id="login-logout-button" onclick="logout()"><img src="https://win98icons.alexmeub.com/icons/png/keys-4.png">Log Out</li>
        </ul>
    </div>
   
    <!-- AUDIO CONTROL ICON -->
    <div class="audio-control" onclick="toggleSound()">
        <i class="fas fa-volume-up" id="sound-icon"></i>
    </div>
   
    <!-- EXTERNAL SCRIPTS -->
    <script src="https://unpkg.com/jquery@3.2.1"></script>
    <script src="https://unpkg.com/clippyjs@latest"></script>
    
    <!-- PROJECT-SPECIFIC SCRIPTS -->
    <!-- Add or remove project scripts here -->
    <script src="friedrich.js"></script>
    <script src="the-nyrrik.js"></script>
    <script src="wanderlust-the-roadtrip.js"></script>
    <script src="maxs-game.js"></script>
    <script src="undo.js"></script>
    <script src="berlin-girl-melody.js"></script>
    
    <!-- OTHER SCRIPTS -->
    <script src="artifacts.js"></script>
    <script src="blog.js"></script>
    
    <!-- MAIN JAVASCRIPT CODE -->
    <script>
    // --- STATE AND CONFIG VARIABLES ---
    // These variables manage the app's state like user, windows, sounds, etc.
    let db; // IndexedDB database
    let currentUser = 'Guest'; // Current logged-in user
    let activeWindow = null; // Currently active window ID
    let openWindows = {}; // Object tracking open windows
    let highestZIndex = 10; // For stacking windows
    let soundEnabled = true; // Sound toggle
    let paintScriptLoaded = false; // Flag for if paint.js is loaded
    let ieScriptLoaded = true; // Flag for IE/blog script
    let friedrichScriptLoaded = false; // Flag for Friedrich script
    let mayaScriptLoaded = false; // Flag for Maya script
   
    const correctUsername = "Malte Stoepke"; // Admin username
    const correctPassword = "Maus_123"; // Admin password
    
    // --- DOM ELEMENTS REFERENCES ---
    // Quick access to key elements
    const desktop = document.getElementById('desktop');
    const taskbar = document.querySelector('.taskbar');
    const taskbarApps = document.getElementById('taskbar-apps');
    const startMenu = document.getElementById('start-menu');
    const loginScreen = document.getElementById('login-screen');
    const loadingScreen = document.getElementById('loading-screen');
    const contextMenu = document.getElementById('context-menu');
   
    // --- INITIALIZATION FUNCTIONS ---
    // Runs when the page loads
    document.addEventListener('DOMContentLoaded', () => {
        // Simulate loading progress bar
        let progress = 0;
        const interval = setInterval(() => {
            progress += 20;
            document.getElementById('loading-progress').style.width = progress + '%';
           
            if (progress >= 100) {
                clearInterval(interval);
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    document.getElementById('startup-sound').play().catch(e => console.log("Audio autoplay blocked."));
                   
                    // Initialize the OS after loading screen disappears
                    initOS();
                }, 500);
            }
        }, 200);
    });
    
    // Main init function
    function initOS() {
        // Auto login as guest
        guestLogin();
       
        // Initialize components
        initDB();
        updateClock();
        setupEventListeners();
        startMinesweeper(8, 8, 10); // Start minesweeper game with beginner settings
    }
    
    // Initialize IndexedDB
    function initDB() {
        const request = indexedDB.open('PortfolioOSDB', 4);
        request.onerror = (event) => {
            console.error("Database error: ", event.target.errorCode);
            guestLogin();
        };
       
        request.onsuccess = (event) => {
            db = event.target.result;
            console.log("Database opened successfully.");
            clippy.load('Clippy', function(agent) {
                window.clippyAgent = agent;
                agent.show();
                agent.speak("Hi! I'm Clippy. Welcome to Malte Stoepke's Portfolio OS. Explore my 3D art projects!");
            });
            initBlog(db, currentUser); // Initialize blog with DB
        };
       
        request.onupgradeneeded = (event) => {
            let db = event.target.result;
            if (!db.objectStoreNames.contains('artworks')) {
                db.createObjectStore('artworks', { keyPath: 'id' });
            }
            if (!db.objectStoreNames.contains('blogPosts')) {
                db.createObjectStore('blogPosts', { keyPath: 'id', autoIncrement: true });
            }
        };
    }
   
    // Setup event listeners for interactions
    function setupEventListeners() {
        // Start Menu toggle
        document.getElementById('start-button').addEventListener('click', (e) => {
            e.stopPropagation();
            startMenu.classList.toggle('active');
            playSound('click-sound');
        });
        document.addEventListener('click', () => {
            startMenu.classList.remove('active');
            contextMenu.style.display = 'none';
        });
       
        // Window drag and controls
        document.querySelectorAll('.window').forEach(win => {
            const winId = win.id;
            const titleBar = win.querySelector('.title-bar');
           
            if (titleBar) {
                titleBar.addEventListener('mousedown', (e) => {
                    if (e.target.closest('.title-bar-controls')) return;
                    startDrag(e, win);
                    bringToFront(winId);
                });
            }
            const controls = win.querySelector('.title-bar-controls');
            if (controls) {
                controls.querySelector('[aria-label="Close"]')?.addEventListener('click', () => closeWindow(winId));
                controls.querySelector('[aria-label="Maximize"]')?.addEventListener('click', () => maximizeWindow(winId));
                controls.querySelector('[aria-label="Minimize"]')?.addEventListener('click', () => minimizeWindow(winId));
            }
            win.addEventListener('mousedown', () => bringToFront(winId));
        });
       
        // Desktop icon right-click for context menu (admin only)
        desktop.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            const icon = e.target.closest('.icon');
            if (currentUser === correctUsername && icon && icon.dataset.type === 'artwork') {
                showContextMenu(e.clientX, e.clientY, icon.dataset.id);
            }
        });
        contextMenu.addEventListener('click', e => e.stopPropagation());
    }
    
    // --- AUTHENTICATION FUNCTIONS ---
    // Login as admin
    function login() {
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;
        if (user === correctUsername && pass === correctPassword) {
            currentUser = correctUsername;
            loginScreen.style.display = 'none';
            updateUIAfterLogin();
            playSound('start-sound');
            if (window.clippyAgent) {
                window.clippyAgent.speak('Logged in as admin. You can now edit content and manage blog posts.');
            }
        } else {
            playSound('error-sound');
            alert("Incorrect username or password.");
        }
    }
    
    // Guest login
    function guestLogin() {
        currentUser = 'Guest';
        loginScreen.style.display = 'none';
        updateUIAfterLogin();
        playSound('click-sound');
    }
   
    // Logout function
    function logout() {
        currentUser = 'Guest';
        loginScreen.style.display = 'flex';
        updateUIAfterLogin();
        playSound('click-sound');
        Object.keys(openWindows).forEach(id => closeWindow(id));
    }
   
    // Update UI after login/logout
    function updateUIAfterLogin() {
        desktop.style.display = 'block';
        taskbar.style.display = 'flex';
       
        document.getElementById('taskbar-user').textContent = currentUser;
        const editControls = document.querySelectorAll('.edit-controls');
       
        if (currentUser === correctUsername) {
            document.getElementById('login-logout-button').innerHTML = `<img src="https://win98icons.alexmeub.com/icons/png/keys-4.png">Log Out`;
            document.getElementById('login-logout-button').onclick = logout;
           
            document.querySelectorAll('.editable-field').forEach(field => {
                field.contentEditable = true;
            });
            editControls.forEach(controls => {
                controls.style.display = 'block';
            });
        } else {
            document.getElementById('login-logout-button').innerHTML = `<img src="https://win98icons.alexmeub.com/icons/png/keys-4.png">Log In`;
            document.getElementById('login-logout-button').onclick = () => { loginScreen.style.display = 'flex'; };
           
            document.querySelectorAll('.editable-field').forEach(field => {
                field.contentEditable = false;
            });
            editControls.forEach(controls => {
                controls.style.display = 'none';
            });
        }
       
        setupIconInteraction(); // Setup draggable icons and clicks
        updateBlogUI(currentUser); // Update blog based on user
    }
   
    // --- CLOCK FUNCTION ---
    // Static clock for last update
    function updateClock() {
        document.getElementById('taskbar-time').textContent = 'Last Update: 08/01/2025';
    }
   
    // --- WINDOW MANAGEMENT FUNCTIONS ---
    // Open a window by ID
    function openWindow(winId) {
        const win = document.getElementById(winId);
        if (!win) return;
       
        win.style.display = 'block';
        bringToFront(winId);
        playSound('window-open-sound');
        if (!openWindows[winId]) {
            createTaskbarApp(winId);
        }
        openWindows[winId] = { minimized: false };
        updateTaskbar();
        startMenu.classList.remove('active');
        if (window.clippyAgent) {
            let explanation = '';
            switch (winId) {
                case 'my-computer-window':
                    explanation = 'This is My Computer. It contains access to my portfolio and blog.';
                    break;
                case 'portfolio-window':
                    explanation = 'This is my portfolio. Explore my 3D art projects in the folders.';
                    break;
                case 'about-window':
                    explanation = 'Read about me in this Notepad file.';
                    break;
                case 'paint-window':
                    explanation = 'Use Paint to create your own artwork and save it to the desktop.';
                    break;
                case 'pixelsweeper-window':
                    explanation = 'Play PixelSweeper, a Minesweeper clone.';
                    break;
                case 'recycle-window':
                    explanation = 'This is the Recycle Bin, containing unfinished work.';
                    break;
                case 'friedrich-window':
                    explanation = 'Explore the Friedrich project, showcasing a character design with various emotions and technical details.';
                    break;
                case 'maya-window':
                    explanation = 'This is Maya 1.0, a 3D modeling application with interactive controls.';
                    break;
                case 'blog-window':
                    explanation = 'Check out my blog! Click posts to view them or add new ones if you\'re logged in as admin.';
                    break;
                default:
                    if (winId.startsWith('blog-post-window')) {
                        explanation = 'This is a blog post. Enjoy reading!';
                    }
            }
            if (explanation) {
                window.clippyAgent.speak(explanation);
            }
        }
    }
   
    // Open Paint window and load script if needed
    function openPaint() {
        const winId = 'paint-window';
        let win = document.getElementById(winId);
        if (!win) {
            win = document.createElement('div');
            win.className = 'window';
            win.id = winId;
            win.style.width = '500px';
            win.style.height = '400px';
            win.innerHTML = `
                <div class="title-bar">
                    <div class="title-bar-text">untitled - Paint</div>
                    <div class="title-bar-controls">
                        <button aria-label="Minimize" onclick="minimizeWindow('paint-window')"></button>
                        <button aria-label="Maximize" onclick="maximizeWindow('paint-window')"></button>
                        <button aria-label="Close" onclick="closeWindow('paint-window')"></button>
                    </div>
                </div>
                <div class="window-body">
                    <div class="paint-tools">
                        <div class="tool-button active" id="pencil-tool" onclick="setTool('pencil')">
                            <i class="fas fa-pencil-alt"></i>
                        </div>
                        <div class="tool-button" id="brush-tool" onclick="setTool('brush')">
                            <i class="fas fa-paint-brush"></i>
                        </div>
                        <div class="tool-button" id="eraser-tool" onclick="setTool('eraser')">
                            <i class="fas fa-eraser"></i>
                        </div>
                        <div class="tool-button" id="fill-tool" onclick="setTool('fill')">
                            <i class="fas fa-fill-drip"></i>
                        </div>
                        <div class="tool-button" id="pick-tool" onclick="setTool('pick')">
                            <i class="fas fa-eye-dropper"></i>
                        </div>
                        <div class="tool-button" id="magnifier-tool" onclick="setTool('magnifier')">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="tool-button" id="text-tool" onclick="setTool('text')">
                            <i class="fas fa-font"></i>
                        </div>
                        <div class="tool-button" id="line-tool" onclick="setTool('line')">
                            <i class="fas fa-slash"></i>
                        </div>
                        <div class="tool-button" id="curve-tool" onclick="setTool('curve')">
                            <i class="fas fa-bezier-curve"></i>
                        </div>
                        <div class="tool-button" id="rectangle-tool" onclick="setTool('rectangle')">
                            <i class="fas fa-square"></i>
                        </div>
                        <div class="tool-button" id="ellipse-tool" onclick="setTool('ellipse')">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="tool-button" id="rounded-rectangle-tool" onclick="setTool('rounded-rectangle')">
                            <i class="fas fa-square-full"></i>
                        </div>
                        <div class="tool-button" id="polygon-tool" onclick="setTool('polygon')">
                            <i class="fas fa-draw-polygon"></i>
                        </div>
                        <div class="tool-button" id="select-tool" onclick="setTool('select')">
                            <i class="fas fa-object-ungroup"></i>
                        </div>
                        <div class="tool-button" id="free-select-tool" onclick="setTool('free-select')">
                            <i class="fas fa-lasso"></i>
                        </div>
                        <div class="tool-button" onclick="clearCanvas()">
                            <i class="fas fa-trash"></i>
                        </div>
                        <button class="login-button" onclick="saveArtwork()" style="margin-left: 10px;">
                            <i class="fas fa-save"></i> Save to Desktop
                        </button>
                    </div>
                    <canvas id="paint-canvas" class="paint-canvas" width="480" height="320"></canvas>
                    <div class="color-picker">
                        <div class="color-option selected" style="background: black;" onclick="setColor('black')"></div>
                        <div class="color-option" style="background: red;" onclick="setColor('red')"></div>
                        <div class="color-option" style="background: green;" onclick="setColor('green')"></div>
                        <div class="color-option" style="background: blue;" onclick="setColor('blue')"></div>
                        <div class="color-option" style="background: yellow;" onclick="setColor('yellow')"></div>
                        <div class="color-option" style="background: purple;" onclick="setColor('purple')"></div>
                        <div class="color-option" style="background: orange;" onclick="setColor('orange')"></div>
                        <div class="color-option" style="background: pink;" onclick="setColor('pink')"></div>
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            const titleBar = win.querySelector('.title-bar');
            if (titleBar) {
                titleBar.addEventListener('mousedown', (e) => {
                    if (e.target.closest('.title-bar-controls')) return;
                    startDrag(e, win);
                    bringToFront(winId);
                });
            }
            win.addEventListener('mousedown', () => bringToFront(winId));
        }
        if (!paintScriptLoaded) {
            const script = document.createElement('script');
            script.src = 'paint.js';
            script.onload = () => {
                paintScriptLoaded = true;
                console.log('paint.js loaded successfully');
                if (typeof initPaint === 'function') {
                    initPaint();
                    openWindow(winId);
                } else {
                    playSound('error-sound');
                    alert('Failed to initialize Paint application.');
                }
            };
            script.onerror = () => {
                console.error('Failed to load paint.js');
                playSound('error-sound');
                alert('Failed to load Paint application.');
            };
            document.body.appendChild(script);
        } else {
            if (typeof initPaint === 'function') {
                initPaint();
            }
            openWindow(winId);
        }
    }
   
    // Open Maya window and load script if needed
    function openMaya() {
        console.log('Attempting to open Maya 1.0');
        if (!mayaScriptLoaded) {
            const script = document.createElement('script');
            script.src = 'maya.js';
            script.onload = () => {
                console.log('maya.js loaded successfully');
                mayaScriptLoaded = true;
                initMaya();
                openWindow('maya-window');
            };
            script.onerror = () => {
                console.error('Failed to load maya.js');
                playSound('error-sound');
                alert('Failed to load Maya 1.0 application.');
            };
            document.body.appendChild(script);
        } else {
            console.log('Maya script already loaded, opening window');
            openWindow('maya-window');
        }
    }
   
    // Close a window
    function closeWindow(winId) {
        const win = document.getElementById(winId);
        if (win) {
            win.style.display = 'none';
            playSound('window-close-sound');
        }
       
        delete openWindows[winId];
        if (activeWindow === winId) activeWindow = null;
        updateTaskbar();
    }
    
    // Minimize a window
    function minimizeWindow(winId) {
        const win = document.getElementById(winId);
        if (win) {
            win.style.display = 'none';
            playSound('click-sound');
        }
        if (openWindows[winId]) {
            openWindows[winId].minimized = true;
        }
        if (activeWindow === winId) activeWindow = null;
        updateTaskbar();
    }
   
    // Maximize a window
    function maximizeWindow(winId) {
        const win = document.getElementById(winId);
        if (win) {
            win.classList.toggle('maximized');
            playSound('click-sound');
            if (win.classList.contains('maximized')) {
                win.style.top = '';
                win.style.left = '';
                win.style.width = '';
                win.style.height = '';
            }
        }
    }
   
    // Bring window to front
    function bringToFront(winId) {
        if (activeWindow === winId) return;
       
        highestZIndex++;
        const win = document.getElementById(winId);
        if (win) {
            win.style.zIndex = highestZIndex;
           
            if (openWindows[winId] && openWindows[winId].minimized) {
                openWindows[winId].minimized = false;
                win.style.display = 'block';
            }
        }
       
        activeWindow = winId;
        updateTaskbar();
    }
   
    // Drag window function
    function startDrag(e, element) {
        let offsetX = e.clientX - element.offsetLeft;
        let offsetY = e.clientY - element.offsetTop;
        function drag(e) {
            if (element.classList.contains('maximized')) return;
            element.style.left = `${e.clientX - offsetX}px`;
            element.style.top = `${e.clientY - offsetY}px`;
        }
        function stopDrag() {
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', stopDrag);
        }
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', stopDrag);
    }
   
    // --- TASKBAR FUNCTIONS ---
    // Create taskbar button for open window
    function createTaskbarApp(winId) {
        const win = document.getElementById(winId);
        const title = win.querySelector('.title-bar-text').textContent;
       
        const app = document.createElement('button');
        app.className = 'taskbar-app';
        app.textContent = title;
        app.dataset.winId = winId;
        app.onclick = () => {
            bringToFront(winId);
        };
        taskbarApps.appendChild(app);
    }
   
    // Update taskbar buttons state
    function updateTaskbar() {
        const apps = taskbarApps.querySelectorAll('.taskbar-app');
        apps.forEach(app => {
            const winId = app.dataset.winId;
            if (!openWindows[winId]) {
                app.remove();
                return;
            }
           
            if (winId === activeWindow && !openWindows[winId].minimized) {
                app.classList.add('active');
            } else {
                app.classList.remove('active');
            }
        });
    }
    
    // --- DESKTOP ICON FUNCTIONS ---
    // Setup interactions for icons (drag, click, etc.)
    function setupIconInteraction() {
        console.log('Setting up Definicion de iconos');
        document.querySelectorAll('.icon').forEach(icon => {
            console.log(`Processing icon: ${icon.dataset.id}`);
            const newIcon = icon.cloneNode(true);
            icon.parentNode.replaceChild(newIcon, icon);
            const savedPos = localStorage.getItem(`iconpos_${newIcon.dataset.id}`);
            if (savedPos) {
                const { top, left } = JSON.parse(savedPos);
                newIcon.style.top = top;
                newIcon.style.left = left;
            }
            if (currentUser === correctUsername) {
                newIcon.classList.add('draggable');
                makeIconDraggable(newIcon);
            } else {
                newIcon.classList.remove('draggable');
            }
           
            newIcon.addEventListener('dblclick', () => {
                console.log(`Double-clicked icon: ${newIcon.dataset.id}`);
                const windowId = newIcon.dataset.id === 'paint' ? null :
                                newIcon.dataset.id === 'friedrich' ? null :
                                newIcon.dataset.id === 'maya' ? null :
                                `${newIcon.dataset.id}-window`;
                if (newIcon.dataset.id === 'paint') {
                    openPaint();
                } else if (newIcon.dataset.id === 'friedrich') {
                    openFriedrich();
                } else if (newIcon.dataset.id === 'maya') {
                    openMaya();
                } else {
                    openWindow(windowId);
                }
            });
            newIcon.addEventListener('click', (e) => {
                e.stopPropagation();
                document.querySelectorAll('.icon.selected').forEach(i => i.classList.remove('selected'));
                newIcon.classList.add('selected');
            });
        });
       
        desktop.addEventListener('click', () => {
            document.querySelectorAll('.icon.selected').forEach(i => i.classList.remove('selected'));
        });
    }
    
    // Make icon draggable (admin only)
    function makeIconDraggable(icon) {
        icon.addEventListener('mousedown', e => {
            e.preventDefault();
            e.stopPropagation();
            let offsetX = e.clientX - icon.offsetLeft;
            let offsetY = e.clientY - icon.offsetTop;
            function drag(e) {
                icon.style.left = `${e.clientX - offsetX}px`;
                icon.style.top = `${e.clientY - offsetY}px`;
            }
            function stopDrag() {
                localStorage.setItem(`iconpos_${icon.dataset.id}`, JSON.stringify({ top: icon.style.top, left: icon.style.left }));
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', stopDrag);
            }
           
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
        });
    }
    
    // --- CONTEXT MENU FUNCTIONS ---
    // Show context menu for delete (admin only)
    function showContextMenu(x, y, id) {
        contextMenu.style.top = `${y}px`;
        contextMenu.style.left = `${x}px`;
        contextMenu.style.display = 'block';
        const deleteBtn = document.getElementById('context-delete');
        deleteBtn.onclick = () => {
            if (confirm("Are you sure you want to delete this item?")) {
                if (id.includes('blog-post')) {
                    deleteBlogPost(parseInt(id.replace('blog-post-', '')));
                } else {
                    deleteArtwork(id);
                }
            }
            contextMenu.style.display = 'none';
        };
    }
    
    // --- INDEXEDDB FUNCTIONS FOR ARTWORKS ---
    // Add new artwork to DB
    function addArtwork(artwork) {
        const transaction = db.transaction(['artworks'], 'readwrite');
        const store = transaction.objectStore('artworks');
        store.add(artwork);
        transaction.oncomplete = () => {
            playSound('click-sound');
            alert('Artwork added!');
        };
        transaction.onerror = (e) => console.error('Error adding artwork:', e);
    }
    
    // Delete artwork from DB
    function deleteArtwork(id) {
        const transaction = db.transaction(['artworks'], 'readwrite');
        const store = transaction.objectStore('artworks');
        store.delete(id);
        transaction.oncomplete = () => {
            playSound('click-sound');
        };
    }
   
    // Save edits to about section (localStorage)
    function saveAboutEdits() {
        const bio = document.getElementById('about-bio').innerHTML;
        const desc = document.getElementById('about-desc').innerHTML;
        const contact = document.getElementById('about-contact').innerHTML;
       
        const aboutData = { bio, desc, contact };
        localStorage.setItem('aboutData', JSON.stringify(aboutData));
       
        playSound('click-sound');
        alert('About information updated!');
    }
    
    // --- BLOG NAVIGATION DUMMY FUNCTIONS ---
    // Back button (dummy)
    function goBack() {
        playSound('click-sound');
        document.querySelector('.blog-status-bar').textContent = 'Navigating back...';
        setTimeout(() => {
            document.querySelector('.blog-status-bar').textContent = 'Ready';
        }, 1000);
    }
    
    // Forward button (dummy)
    function goForward() {
        playSound('click-sound');
        document.querySelector('.blog-status-bar').textContent = 'Navigating forward...';
        setTimeout(() => {
            document.querySelector('.blog-status-bar').textContent = 'Ready';
        }, 1000);
    }
    
    // Refresh blog
    function refreshBlog() {
        playSound('click-sound');
        document.querySelector('.blog-status-bar').textContent = 'Refreshing...';
        loadBlogPosts(db, currentUser);
        setTimeout(() => {
            document.querySelector('.blog-status-bar').textContent = 'Ready';
        }, 1000);
    }
    
    // --- APPLICATION FUNCTIONS ---
    // Minesweeper (PixelSweeper) game logic
    function startMinesweeper(width, height, mineCount) {
        const boardEl = document.getElementById('minesweeper-board');
        boardEl.innerHTML = '';
        boardEl.style.gridTemplateColumns = `repeat(${width}, 20px)`;
       
        let board = [];
        let mines = [];
        let revealed = [];
       
        for (let r = 0; r < height; r++) {
            board[r] = [];
            revealed[r] = [];
            for (let c = 0; c < width; c++) {
                board[r][c] = 0;
                revealed[r][c] = false;
               
                const cell = document.createElement('div');
                cell.className = 'minesweeper-cell';
                cell.dataset.row = r;
                cell.dataset.col = c;
                boardEl.appendChild(cell);
            }
        }
       
        let minesPlaced = 0;
        while (minesPlaced < mineCount) {
            const r = Math.floor(Math.random() * height);
            const c = Math.floor(Math.random() * width);
            if (!board[r][c].mine) {
                mines.push({r, c});
                board[r][c] = 'X';
                minesPlaced++;
               
                for (let i = -1; i <= 1; i++) {
                    for (let j = -1; j <= 1; j++) {
                        if (i === 0 && j === 0) continue;
                        const nr = r + i, nc = c + j;
                        if (nr >= 0 && nr < height && nc >= 0 && nc < width && board[nr][nc] !== 'X') {
                            board[nr][nc]++;
                        }
                    }
                }
            }
        }
       
        boardEl.addEventListener('click', (e) => {
            const cell = e.target.closest('.minesweeper-cell');
            if (!cell) return;
           
            const r = parseInt(cell.dataset.row);
            const c = parseInt(cell.dataset.col);
           
            if (board[r][c] === 'X') {
                cell.classList.add('mine');
                cell.innerHTML = '💣';
                playSound('error-sound');
                alert('Game Over!');
                startMinesweeper(8, 8, 10);
            } else {
                revealed[r][c] = true;
                cell.classList.add('revealed');
                cell.textContent = board[r][c] > 0 ? board[r][c] : '';
                if (board[r][c] > 0) {
                    cell.classList.add(`color-${board[r][c]}`);
                }
               
                if (board[r][c] === 0) {
                    revealAdjacent(r, c, board, revealed);
                }
               
                if (checkWin(board, revealed, mines.length)) {
                    playSound('click-sound');
                    alert('Congratulations! You won!');
                    startMinesweeper(8, 8, 10);
                }
            }
        });
       
        // Reveal adjacent cells for zero mines
        function revealAdjacent(r, c, board, revealed) {
            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    if (i === 0 && j === 0) continue;
                    const nr = r + i, nc = c + j;
                    if (nr >= 0 && nr < height && nc >= 0 && nc < width && !revealed[nr][nc]) {
                        revealed[nr][nc] = true;
                        const cell = document.querySelector(`.minesweeper-cell[data-row="${nr}"][data-col="${nc}"]`);
                        cell.classList.add('revealed');
                        cell.textContent = board[nr][nc] > 0 ? board[nr][nc] : '';
                        if (board[nr][nc] > 0) {
                            cell.classList.add(`color-${board[nr][nc]}`);
                        }
                        if (board[nr][nc] === 0) {
                            revealAdjacent(nr, nc, board, revealed);
                        }
                    }
                }
            }
        }
       
        // Check if game is won
        function checkWin(board, revealed, mineCount) {
            let safeRevealed = 0;
            for (let r = 0; r < height; r++) {
                for (let c = 0; c < width; c++) {
                    if (board[r][c] !== 'X' && revealed[r][c]) {
                        safeRevealed++;
                    }
                }
            }
            return safeRevealed === (width * height - mineCount);
        }
    }
   
    // --- AUDIO CONTROL FUNCTIONS ---
    // Play a sound by ID
    function playSound(id) {
        if (!soundEnabled) return;
        const sound = document.getElementById(id);
        sound.currentTime = 0;
        sound.play().catch(e => console.log("Sound play prevented:", e));
    }
   
    // Toggle sound on/off
    function toggleSound() {
        soundEnabled = !soundEnabled;
        document.getElementById('sound-icon').className = soundEnabled ?
            'fas fa-volume-up' : 'fas fa-volume-mute';
        playSound('click-sound');
    }
    </script>
</body>
</html>
