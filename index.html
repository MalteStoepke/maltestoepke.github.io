<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malte Stoepke's 3D Art Portfolio</title>
  <link rel="stylesheet" href="https://unpkg.com/98.css">
  <style>
    body {
      background: teal;
      font-family: "Windows95", sans-serif;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .desktop {
      flex-grow: 1;
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
    }
    .icon {
      text-align: center;
      cursor: pointer;
    }
    .icon img {
      width: 48px;
      height: 48px;
    }
    .icon p {
      color: white;
      text-shadow: 1px 1px black;
      margin: 5px 0 0;
      font-size: 12px;
    }
    .window {
      display: none;
      position: absolute;
      top: 10%;
      left: 10%;
      width: 80%;
      max-height: 80%;
      overflow: auto;
      cursor: move;
      z-index: 10;
      box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.3);
    }
    .window.maximized {
      width: 100% !important;
      height: calc(100% - 30px) !important;
      top: 0 !important;
      left: 0 !important;
      max-height: none;
    }
    .window.active {
      display: block;
    }
    .window img, .window iframe, .window video {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 10px auto;
    }
    .window iframe {
      height: 400px;
    }
    .window video {
      max-height: 400px;
      background: black;
    }
    .taskbar {
      height: 30px;
      background: silver;
      border-top: 2px solid white;
      border-left: 2px solid white;
      border-right: 2px solid black;
      border-bottom: 2px solid black;
      display: flex;
      align-items: center;
      padding: 0 5px;
      justify-content: space-between;
      position: relative;
      z-index: 100;
    }
    .start-button {
      margin-right: 10px;
      cursor: pointer;
      font-weight: bold;
    }
    .taskbar-time {
      font-size: 12px;
      padding: 2px 5px;
      border: 2px inset silver;
      min-width: 140px;
      text-align: center;
    }
    .start-menu {
      display: none;
      position: absolute;
      bottom: 32px;
      left: 2px;
      width: 200px;
      background: silver;
      border: 2px outset white;
      z-index: 1000;
    }
    .start-menu.active {
      display: block;
    }
    .start-menu ul {
      list-style: none;
      padding: 5px;
      margin: 0;
    }
    .start-menu li {
      padding: 5px;
      cursor: pointer;
      position: relative;
    }
    .start-menu li:hover {
      background: navy;
      color: white;
    }
    .start-menu .submenu {
      display: none;
      position: absolute;
      left: 100%;
      top: 0;
      background: silver;
      border: 2px outset white;
      width: 200px;
    }
    .start-menu li:hover .submenu {
      display: block;
    }
    .portfolio-content {
      padding: 10px;
    }
    .clippy {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background: white;
      border: 2px outset silver;
      padding: 15px;
      max-width: 300px;
      display: none;
      z-index: 1001;
      box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);
    }
    .clippy.active {
      display: block;
    }
    .clippy img {
      width: 80px;
      float: left;
      margin-right: 15px;
    }
    .clippy p {
      margin: 0 0 10px 0;
      font-size: 14px;
    }
    .clippy button {
      display: block;
      margin: 0 auto;
    }
    .paint-canvas {
      border: 1px solid black;
      background: white;
      cursor: crosshair;
    }
    .minesweeper-grid {
      display: grid;
      grid-template-columns: repeat(8, 30px);
      gap: 2px;
      background: silver;
      padding: 5px;
      margin: 10px auto;
      width: fit-content;
    }
    .minesweeper-cell {
      width: 30px;
      height: 30px;
      background: silver;
      border: 2px outset white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
    }
    .minesweeper-cell.revealed {
      border: 1px solid gray;
      background: #c0c0c0;
    }
    .minesweeper-cell.flagged {
      background: url('https://win98icons.alexmeub.com/icons/png/minesweeper_flag.png') center no-repeat;
      background-size: 20px;
    }
    .minesweeper-cell.mine {
      background: url('https://win98icons.alexmeub.com/icons/png/minesweeper_mine.png') center no-repeat red;
      background-size: 20px;
    }
    .animated-title {
      display: inline-block;
      animation: bounce 4s infinite;
      color: navy;
    }
    .taskbar-apps {
      display: flex;
      flex-grow: 1;
      margin: 0 10px;
      gap: 2px;
    }
    .taskbar-app {
      padding: 2px 8px;
      border: 2px outset white;
      font-size: 12px;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 150px;
    }
    .taskbar-app.active {
      border: 2px inset silver;
    }
    .artwork-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      padding: 10px;
    }
    .artwork-item {
      cursor: pointer;
      text-align: center;
    }
    .artwork-item img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border: 2px outset silver;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
  </style>
</head>
<body>
  <div class="desktop">
    <div class="icon" onclick="openWindow('portfolio-window')">
      <img src="https://cdn.iconscout.com/icon/free/png-256/artstation-3521434-2944872.png" alt="ArtStation Portfolio">
      <p>My 3D Art</p>
    </div>
    <div class="icon" onclick="openWindow('artwork1-window')">
      <img src="https://win98icons.alexmeub.com/icons/png/3d-0.png" alt="Artwork 1">
      <p>Cyberpunk Street</p>
    </div>
    <div class="icon" onclick="openWindow('artwork2-window')">
      <img src="https://win98icons.alexmeub.com/icons/png/3d-0.png" alt="Artwork 2">
      <p>Fantasy Castle</p>
    </div>
    <div class="icon" onclick="openWindow('about-window')">
      <img src="https://win98icons.alexmeub.com/icons/png/notepad_file-0.png" alt="About File">
      <p>About Me</p>
    </div>
    <div class="icon" onclick="openWindow('recycle-window')">
      <img src="https://win98icons.alexmeub.com/icons/png/recycle_bin_empty-4.png" alt="Recycle Bin">
      <p>Recycle Bin</p>
    </div>
    <div class="icon" onclick="openWindow('pixelsweeper-window')">
      <img src="https://win98icons.alexmeub.com/icons/png/minesweeper-2.png" alt="PixelSweeper">
      <p>PixelSweeper</p>
    </div>
    <div class="icon" onclick="openWindow('paint-window')">
      <img src="https://win98icons.alexmeub.com/icons/png/paint-0.png" alt="Paint">
      <p>Paint</p>
    </div>
  </div>
  
  <!-- Portfolio Window -->
  <div class="window" id="portfolio-window">
    <div class="title-bar" onmousedown="startDrag(event, 'portfolio-window'); bringToFront('portfolio-window')">
      <div class="title-bar-text">Malte Stoepke's 3D Art Portfolio</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" onclick="minimizeWindow('portfolio-window')"></button>
        <button aria-label="Maximize" onclick="maximizeWindow('portfolio-window')"></button>
        <button aria-label="Close" onclick="closeWindow('portfolio-window')"></button>
      </div>
    </div>
    <div class="window-body portfolio-content">
      <h2 class="animated-title">My 3D Artworks</h2>
      <div class="artwork-gallery">
        <div class="artwork-item" onclick="openWindow('artwork1-window')">
          <img src="https://cdna.artstation.com/p/assets/images/images/065/180/622/large/malte-stoepke-cyberpunk-street.jpg?1690471608" alt="Cyberpunk Street">
          <p>Cyberpunk Street</p>
        </div>
        <div class="artwork-item" onclick="openWindow('artwork2-window')">
          <img src="https://cdna.artstation.com/p/assets/images/images/065/180/626/large/malte-stoepke-fantasy-castle.jpg?1690471622" alt="Fantasy Castle">
          <p>Fantasy Castle</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Cyberpunk Street Artwork -->
  <div class="window" id="artwork1-window">
    <div class="title-bar" onmousedown="startDrag(event, 'artwork1-window'); bringToFront('artwork1-window')">
      <div class="title-bar-text">Cyberpunk Street</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" onclick="minimizeWindow('artwork1-window')"></button>
        <button aria-label="Maximize" onclick="maximizeWindow('artwork1-window')"></button>
        <button aria-label="Close" onclick="closeWindow('artwork1-window')"></button>
      </div>
    </div>
    <div class="window-body portfolio-content">
      <h2 class="animated-title">Cyberpunk Street</h2>
      <img src="https://cdna.artstation.com/p/assets/images/images/065/180/622/large/malte-stoepke-cyberpunk-street.jpg?1690471608" alt="Cyberpunk Street">
      <p>Description: A cyberpunk street scene with neon signs and futuristic vehicles, created in Blender.</p>
      <video controls>
        <source src="https://cdn.artstation.com/videos/encoded/1/0/5/105fbd8aedc2f4d4aeb6b1e8f8e1c5b9.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
  </div>
  
  <!-- Fantasy Castle Artwork -->
  <div class="window" id="artwork2-window">
    <div class="title-bar" onmousedown="startDrag(event, 'artwork2-window'); bringToFront('artwork2-window')">
      <div class="title-bar-text">Fantasy Castle</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" onclick="minimizeWindow('artwork2-window')"></button>
        <button aria-label="Maximize" onclick="maximizeWindow('artwork2-window')"></button>
        <button aria-label="Close" onclick="closeWindow('artwork2-window')"></button>
      </div>
    </div>
    <div class="window-body portfolio-content">
      <h2 class="animated-title">Fantasy Castle</h2>
      <img src="https://cdna.artstation.com/p/assets/images/images/065/180/626/large/malte-stoepke-fantasy-castle.jpg?1690471622" alt="Fantasy Castle">
      <p>Description: A fantasy castle floating in the sky, created using Blender and Photoshop.</p>
    </div>
  </div>
  
  <!-- Other windows remain similar but updated with maximize/minimize buttons -->
  <!-- About Window -->
  <div class="window" id="about-window">
    <div class="title-bar" onmousedown="startDrag(event, 'about-window'); bringToFront('about-window')">
      <div class="title-bar-text">About Malte Stoepke</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" onclick="minimizeWindow('about-window')"></button>
        <button aria-label="Maximize" onclick="maximizeWindow('about-window')"></button>
        <button aria-label="Close" onclick="closeWindow('about-window')"></button>
      </div>
    </div>
    <div class="window-body portfolio-content">
      <h2 class="animated-title">About the Artist</h2>
      <p>Hi, I'm Malte Stoepke! I'm a passionate 3D artist specializing in character modeling and environment design using Blender, Maya, and ZBrush.</p>
      <p>Contact: malte.stoepke@example.com</p>
      <p>Social: <a href="https://www.artstation.com/malte_stoepke">ArtStation</a> | <a href="#">Twitter</a></p>
    </div>
  </div>
  
  <!-- Recycle Bin -->
  <div class="window" id="recycle-window">
    <div class="title-bar" onmousedown="startDrag(event, 'recycle-window'); bringToFront('recycle-window')">
      <div class="title-bar-text">Recycle Bin</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" onclick="minimizeWindow('recycle-window')"></button>
        <button aria-label="Maximize" onclick="maximizeWindow('recycle-window')"></button>
        <button aria-label="Close" onclick="closeWindow('recycle-window')"></button>
      </div>
    </div>
    <div class="window-body portfolio-content">
      <h2 class="animated-title">Easter Egg: Recycle Bin</h2>
      <p>Oops, looks like some polygons got trashed! Try my portfolio instead. ðŸ˜„</p>
    </div>
  </div>
  
  <!-- Paint -->
  <div class="window" id="paint-window">
    <div class="title-bar" onmousedown="startDrag(event, 'paint-window'); bringToFront('paint-window')">
      <div class="title-bar-text">Paint (Easter Egg)</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" onclick="minimizeWindow('paint-window')"></button>
        <button aria-label="Maximize" onclick="maximizeWindow('paint-window')"></button>
        <button aria-label="Close" onclick="closeWindow('paint-window')"></button>
      </div>
    </div>
    <div class="window-body portfolio-content">
      <h2 class="animated-title">MS Paint</h2>
      <canvas id="paintCanvas" class="paint-canvas" width="400" height="300"></canvas>
      <p>Draw something fun! Use your mouse to sketch (black brush only).</p>
    </div>
  </div>
  
  <!-- PixelSweeper -->
  <div class="window" id="pixelsweeper-window">
    <div class="title-bar" onmousedown="startDrag(event, 'pixelsweeper-window'); bringToFront('pixelsweeper-window')">
      <div class="title-bar-text">PixelSweeper (Easter Egg)</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" onclick="minimizeWindow('pixelsweeper-window')"></button>
        <button aria-label="Maximize" onclick="maximizeWindow('pixelsweeper-window')"></button>
        <button aria-label="Close" onclick="closeWindow('pixelsweeper-window')"></button>
      </div>
    </div>
    <div class="window-body portfolio-content">
      <h2 class="animated-title">PixelSweeper</h2>
      <p>Click to reveal tiles, right-click to flag mines. Find all 10 mines to win!</p>
      <button onclick="resetPixelSweeper()">New Game</button>
      <div id="pixelsweeper-grid" class="minesweeper-grid"></div>
      <p id="pixelsweeper-status">Mines left: 10</p>
    </div>
  </div>
  
  <div class="taskbar">
    <button class="start-button" onclick="toggleStartMenu()">Start</button>
    <div id="taskbar-apps" class="taskbar-apps"></div>
    <div id="taskbar-time" class="taskbar-time">Loading time...</div>
  </div>
  
  <div class="start-menu" id="start-menu">
    <ul>
      <li>Portfolio
        <ul class="submenu">
          <li onclick="openWindow('portfolio-window')">View All Artworks</li>
          <li onclick="openWindow('artwork1-window')">Cyberpunk Street</li>
          <li onclick="openWindow('artwork2-window')">Fantasy Castle</li>
        </ul>
      </li>
      <li onclick="openWindow('about-window')">About Me</li>
      <li>Contact
        <ul class="submenu">
          <li><a href="mailto:malte.stoepke@example.com">Email Me</a></li>
          <li><a href="https://www.artstation.com/malte_stoepke" target="_blank">ArtStation</a></li>
        </ul>
      </li>
      <li onclick="openWindow('paint-window')">Paint (Easter Egg)</li>
      <li onclick="openWindow('pixelsweeper-window')">PixelSweeper (Easter Egg)</li>
      <li onclick="alert('Windows 95 Portfolio OS\nVersion 1.0\nCreated by Malte Stoepke')">About Portfolio OS</li>
    </ul>
  </div>
  
  <div class="clippy" id="clippy">
    <img src="https://raw.githubusercontent.com/saberland/saberland.github.io/master/images/clippy.png" alt="Clippy">
    <p>Welcome to Malte Stoepke's 3D Art Portfolio! Navigate this site like a Windows 95 desktop: click icons to view my art, drag windows to move them, or use the Start menu to explore.</p>
    <button onclick="closeClippy()">OK</button>
  </div>
  
  <!-- Audio elements for sounds -->
  <audio id="window-open-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
  <audio id="window-close-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-quick-jump-arcade-game-239.mp3"></audio>
  <audio id="click-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-mouse-click-close-1113.mp3"></audio>
  <audio id="start-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
  
  <script>
    // Show Clippy and initialize everything on page load
    window.onload = function() {
      document.getElementById('clippy').classList.add('active');
      initPaint();
      initPixelSweeper();
      updateTime();
      setInterval(updateTime, 60000);
    };
    
    // Play sounds
    function playSound(id) {
      const sound = document.getElementById(id);
      sound.currentTime = 0;
      sound.play().catch(e => console.log("Sound play prevented by browser:", e));
    }
    
    // Window management
    let zIndexCounter = 10;
    let currentWindow = null;
    let offsetX, offsetY;
    let minimizedWindows = {};
    
    function openWindow(windowId) {
      playSound('window-open-sound');
      const window = document.getElementById(windowId);
      window.classList.add('active');
      bringToFront(windowId);
      document.getElementById('start-menu').classList.remove('active');
      addToTaskbar(windowId);
    }
    
    function closeWindow(windowId) {
      playSound('window-close-sound');
      const window = document.getElementById(windowId);
      window.classList.remove('active');
      window.classList.remove('maximized');
      removeFromTaskbar(windowId);
    }
    
    function minimizeWindow(windowId) {
      playSound('click-sound');
      const window = document.getElementById(windowId);
      window.classList.remove('active');
      minimizedWindows[windowId] = true;
      updateTaskbarButton(windowId);
    }
    
    function maximizeWindow(windowId) {
      playSound('click-sound');
      const window = document.getElementById(windowId);
      window.classList.toggle('maximized');
    }
    
    function bringToFront(windowId) {
      zIndexCounter++;
      document.getElementById(windowId).style.zIndex = zIndexCounter;
      minimizedWindows[windowId] = false;
      updateTaskbarButton(windowId);
    }
    
    function toggleStartMenu() {
      playSound('start-sound');
      const startMenu = document.getElementById('start-menu');
      startMenu.classList.toggle('active');
      if (startMenu.classList.contains('active')) {
        zIndexCounter++;
        startMenu.style.zIndex = zIndexCounter;
      }
    }
    
    function closeClippy() {
      playSound('click-sound');
      document.getElementById('clippy').classList.remove('active');
    }
    
    // Drag functionality
    function startDrag(e, windowId) {
      if (document.getElementById(windowId).classList.contains('maximized')) return;
      
      playSound('click-sound');
      currentWindow = document.getElementById(windowId);
      bringToFront(windowId);
      offsetX = e.clientX - parseInt(currentWindow.style.left || 0);
      offsetY = e.clientY - parseInt(currentWindow.style.top || 0);
      document.addEventListener('mousemove', dragWindow);
      document.addEventListener('mouseup', stopDrag);
    }
    
    function dragWindow(e) {
      if (currentWindow) {
        const maxX = window.innerWidth - currentWindow.offsetWidth;
        const maxY = window.innerHeight - currentWindow.offsetHeight - 30;
        let newX = e.clientX - offsetX;
        let newY = e.clientY - offsetY;
        newX = Math.max(0, Math.min(newX, maxX));
        newY = Math.max(0, Math.min(newY, maxY));
        currentWindow.style.left = newX + 'px';
        currentWindow.style.top = newY + 'px';
      }
    }
    
    function stopDrag() {
      currentWindow = null;
      document.removeEventListener('mousemove', dragWindow);
      document.removeEventListener('mouseup', stopDrag);
    }
    
    // Taskbar functionality
    function addToTaskbar(windowId) {
      const taskbarApps = document.getElementById('taskbar-apps');
      const existingButton = document.querySelector(`.taskbar-app[data-window="${windowId}"]`);
      
      if (!existingButton) {
        const window = document.getElementById(windowId);
        const title = window.querySelector('.title-bar-text').textContent;
        
        const appButton = document.createElement('div');
        appButton.className = 'taskbar-app';
        appButton.dataset.window = windowId;
        appButton.textContent = title;
        appButton.onclick = () => {
          if (minimizedWindows[windowId]) {
            openWindow(windowId);
          } else {
            minimizeWindow(windowId);
          }
        };
        taskbarApps.appendChild(appButton);
      }
      
      minimizedWindows[windowId] = false;
      updateTaskbarButton(windowId);
    }
    
    function removeFromTaskbar(windowId) {
      const button = document.querySelector(`.taskbar-app[data-window="${windowId}"]`);
      if (button) button.remove();
      delete minimizedWindows[windowId];
    }
    
    function updateTaskbarButton(windowId) {
      const button = document.querySelector(`.taskbar-app[data-window="${windowId}"]`);
      if (button) {
        button.classList.toggle('active', !minimizedWindows[windowId]);
      }
    }
    
    // Time display
    function updateTime() {
      const now = new Date();
      const timeString = now.toLocaleString('en-US', { 
        month: 'short', day: 'numeric', year: 'numeric',
        hour: '2-digit', minute: '2-digit'
      });
      document.getElementById('taskbar-time').textContent = timeString;
    }
    
    // Paint program functionality
    function initPaint() {
      const canvas = document.getElementById('paintCanvas');
      const ctx = canvas.getContext('2d');
      let painting = false;
      
      canvas.addEventListener('mousedown', (e) => {
        painting = true;
        ctx.beginPath();
        ctx.moveTo(e.offsetX, e.offsetY);
      });
      
      canvas.addEventListener('mousemove', (e) => {
        if (painting) {
          ctx.lineTo(e.offsetX, e.offsetY);
          ctx.strokeStyle = 'black';
          ctx.lineWidth = 2;
          ctx.stroke();
        }
      });
      
      canvas.addEventListener('mouseup', () => {
        painting = false;
        ctx.closePath();
      });
      
      canvas.addEventListener('mouseleave', () => {
        painting = false;
        ctx.closePath();
      });
    }
    
    // PixelSweeper (Minesweeper) functionality
    function initPixelSweeper() {
      const grid = document.getElementById('pixelsweeper-grid');
      const status = document.getElementById('pixelsweeper-status');
      const size = 8;
      const mineCount = 10;
      let board = [];
      let revealed = 0;
      let flags = 0;
      
      function createBoard() {
        board = Array(size * size).fill(null).map(() => ({
          mine: false,
          revealed: false,
          flagged: false,
          adjacent: 0
        }));
        
        // Place mines
        let minesPlaced = 0;
        while (minesPlaced < mineCount) {
          const index = Math.floor(Math.random() * size * size);
          if (!board[index].mine) {
            board[index].mine = true;
            minesPlaced++;
          }
        }
        
        // Calculate adjacent mines
        for (let i = 0; i < size * size; i++) {
          if (!board[i].mine) {
            const x = i % size;
            const y = Math.floor(i / size);
            let count = 0;
            for (let dy = -1; dy <= 1; dy++) {
              for (let dx = -1; dx <= 1; dx++) {
                const nx = x + dx;
                const ny = y + dy;
                if (nx >= 0 && nx < size && ny >= 0 && ny < size) {
                  if (board[ny * size + nx].mine) count++;
                }
              }
            }
            board[i].adjacent = count;
          }
        }
      }
      
      function renderBoard() {
        grid.innerHTML = '';
        board.forEach((cell, i) => {
          const div = document.createElement('div');
          div.className = 'minesweeper-cell';
          if (cell.revealed) {
            div.classList.add('revealed');
            if (cell.mine) {
              div.classList.add('mine');
            } else if (cell.adjacent > 0) {
              div.textContent = cell.adjacent;
            }
          } else if (cell.flagged) {
            div.classList.add('flagged');
          }
          div.addEventListener('click', () => revealCell(i));
          div.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            flagCell(i);
          });
          grid.appendChild(div);
        });
        status.textContent = `Mines left: ${mineCount - flags}`;
      }
      
      function revealCell(index) {
        if (board[index].revealed || board[index].flagged) return;
        playSound('click-sound');
        board[index].revealed = true;
        revealed++;
        
        if (board[index].mine) {
          board.forEach((cell, i) => {
            if (cell.mine) cell.revealed = true;
          });
          renderBoard();
          alert('Game Over! You hit a mine. Try again!');
          return;
        }
        
        if (board[index].adjacent === 0) {
          const x = index % size;
          const y = Math.floor(index / size);
          for (let dy = -1; dy <= 1; dy++) {
            for (let dx = -1; dx <= 1; dx++) {
              const nx = x + dx;
              const ny = y + dy;
              if (nx >= 0 && nx < size && ny >= 0 && ny < size) {
                revealCell(ny * size + nx);
              }
            }
          }
        }
        
        renderBoard();
        if (revealed === size * size - mineCount) {
          alert('You Win! All mines found!');
        }
      }
      
      function flagCell(index) {
        if (board[index].revealed) return;
        playSound('click-sound');
        board[index].flagged = !board[index].flagged;
        flags += board[index].flagged ? 1 : -1;
        renderBoard();
      }
      
      window.resetPixelSweeper = function() {
        playSound('click-sound');
        revealed = 0;
        flags = 0;
        createBoard();
        renderBoard();
      };
      
      createBoard();
      renderBoard();
    }
  </script>
</body>
</html>
